{% extends "base.html" %}

{% block title %}Dashboard - Campus Carbon Footprint Analyzer{% endblock %}

{% block content %}
<div class="dashboard">
    <div class="dashboard-header">
        <h2>Carbon Emissions Dashboard</h2>
        <div class="date-selector">
            <label for="dateRange">Time Period:</label>
            <select id="dateRange" onchange="updateDashboard()">
                <option value="7">Last Week</option>
                <option value="30">Last 30 Days</option>
                <option value="90">Last 3 Months</option>
                <option value="180" selected>Last 6 Months</option>
                <option value="365">Last Year</option>
            </select>
        </div>
    </div>

    <div class="kpi-container">
        <div class="kpi-card">
            <div class="kpi-icon">ðŸ“Š</div>
            <div class="kpi-content">
                <h3>Total Emissions</h3>
                <p class="kpi-value" id="totalEmissions">--</p>
                <p class="kpi-unit">Tonnes COâ‚‚e</p>
            </div>
        </div>
        
        <div class="kpi-card">
            <div class="kpi-icon">ðŸ“ˆ</div>
            <div class="kpi-content">
                <h3>Change</h3>
                <p class="kpi-value" id="percentChange">--</p>
                <p class="kpi-unit">vs. Previous Period</p>
            </div>
        </div>
        
        <div class="kpi-card">
            <div class="kpi-icon">ðŸŽ¯</div>
            <div class="kpi-content">
                <h3>Biggest Source</h3>
                <p class="kpi-value" id="biggestSource">--</p>
                <p class="kpi-unit" id="biggestSourcePercent">--</p>
            </div>
        </div>
        
        <div class="kpi-card">
            <div class="kpi-icon">âš¡</div>
            <div class="kpi-content">
                <h3>Total Energy</h3>
                <p class="kpi-value" id="energySaved">--</p>
                <p class="kpi-unit">kWh Consumed</p>
            </div>
        </div>
        
        <div class="kpi-card">
            <div class="kpi-icon">ðŸ‘¥</div>
            <div class="kpi-content">
                <h3>Total Human Count</h3>
                <p class="kpi-value" id="totalHumans">--</p>
                <p class="kpi-unit">People</p>
            </div>
        </div>
        
        <div class="kpi-card">
            <div class="kpi-icon">ðŸ“Š</div>
            <div class="kpi-content">
                <h3>Average Per-Person Emission</h3>
                <p class="kpi-value" id="avgPerPersonEmission">--</p>
                <p class="kpi-unit">Tonnes COâ‚‚e/Person</p>
            </div>
        </div>
        
        <div class="kpi-card">
            <div class="kpi-icon">ðŸ“…</div>
            <div class="kpi-content">
                <h3>Highest Per-Person Emission Day</h3>
                <p class="kpi-value" id="highestPerPersonDay">--</p>
                <p class="kpi-unit" id="highestPerPersonValue">--</p>
            </div>
        </div>
    </div>

    <div class="charts-container">
        <div class="chart-card chart-large">
            <h3>Total Emissions Trend</h3>
            <canvas id="trendChart"></canvas>
        </div>

        <div class="chart-card">
            <h3>Monthly Comparison</h3>
            <canvas id="monthlyBarChart"></canvas>
        </div>

        <div class="chart-card">
            <h3>Yearly Comparison</h3>
            <canvas id="yearlyBarChart"></canvas>
        </div>

        <div class="chart-card">
            <h3>Weekly Comparison</h3>
            <canvas id="weeklyBarChart"></canvas>
        </div>

        <div class="chart-card">
            <h3>Emissions Breakdown by Source</h3>
            <canvas id="donutChart"></canvas>
        </div>

        <div class="chart-card">
            <h3>Human Count</h3>
            <canvas id="humanCountChart"></canvas>
        </div>

        <div class="chart-card">
            <h3>Per-Person Emission Trend</h3>
            <canvas id="perPersonEmissionChart"></canvas>
        </div>

        <div class="chart-card">
            <h3>Emissions Comparison</h3>
            <canvas id="emissionsComparisonChart"></canvas>
        </div>
    </div>

    <div class="recommendations-section">
        <h3>ðŸŒ± Recommendations for Reducing Carbon Footprint</h3>
        <div id="recommendationsContainer" class="recommendations-container">
            <p class="loading">Loading recommendations...</p>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
{% endblock %}
